# 毕业设计接口文档

**baseURL：127.0.0.1**:8000



### 一、管理员接口

#### 1、注册接口

**请求方式**：POST

**接口地址 :** `/user/register`

**参数** ：`username`: 不能为空

​			`password`：不能为空

​			`role_id`：可选参数，默认值为1（角色：普通用户），其它值为2（超级管理员）

**调用例子 :** `/user/register`

**成功返回值**：`{ "status": 1, "message": "注册成功~"}`

#### 2、登录接口

**请求方式**：POST

**接口地址 :** `/user/login`

**参数** ：`username`: 不能为空

​			`password`：不能为空

**调用例子 :** `/user/login`

**成功返回值**：`{
    "status": 1,
    "id": 1,
    "username": "xwl01",
    "token": "......",
    "menu": [
       	 {
       	     "id": 1,
       	     "menuURL": "/user",
       	     "type": 1
       	 },
     	   ......
  	  ]
	}`



### 二、文件接口

#### 1、获取已上传文件切片名接口

**请求方式**：GET

**接口地址 :** `/file/getFileSlice`

**验证请求**：携带Bearer Token

**参数** ：hash，suffix	

**调用例子 :** `axios.get(
          "baseURL/file/getFileSlice",
          {
            params: {
              hash,
            },
          }
        )	`

**成功返回值**：`同一文件切片hash名数组：[......]`

#### 2、文件切片上传接口

**请求方式**：POST

**接口地址 :** `/file/uploadFileSlice`

**验证请求**：携带Bearer Token

**文件类型**：ipeg，png，mp4

**参数** ：formData切片数据		

**调用例子 :** `/file/uploadFileSlice`

**成功返回值**：`{
      			status: 1,
     			message: "上传成功~",
     			user: ...,
   			 }`

#### 3、文件切片合并接口

**请求方式**：GET

**接口地址 :** `/file/mergeFile`

**验证请求**：携带Bearer Token

**参数** ：hash,（文件hash值）

​			 fileName，（文件名）	

​             suffix,（文件后缀名）
​             type,（文件类型）
​             len: index（切片数量）		

**调用例子 :** `axios.get("http://127.0.0.1:8000/file/mergeFile", {
              params: {
                hash,
                suffix,
                type,
                len: index,
              },
            })`

**成功返回值**：`{
      			status: 1,
    			message: "合并成功~",
    			file: res,
     			user: ctx.user,
   			 }`

#### 4、文件获取接口

**请求方式**：GET

**接口地址 :** `/file/uploadFileSlice`

**验证请求**：携带Bearer Token

**文件类型**：ipeg，png，mp4

**参数** ：type文件类型(image/video)	

​			limit：返回条数，默认为12

​			offset：偏移量，默认为0	

**调用例子 :** `/file/uploadFileSlice`

**成功返回值**：`{
      			status: 1,
     			message: "上传成功~",
     			user: ...,
   			 }`



### 三、用户接口





### 四、token验证

#### 1、注册接口

**请求方式**：GET

**接口地址 :** `/auth/verifyToken`

**验证请求**：携带Bearer Token

**调用例子 :** `/auth/verifyToken`

**成功返回值**：`{
    			"id": 1,
    			"username": "xwl01",
    			"role_id": 2,
    			"token": "......"
			}`
