import{aD as I,r as b,a as c,o as f,c as g,b as s,w as l,d as i,u as D,E as d,X as R,aE as $}from"./index.c7d9e27f.js";import{E as B,a as N}from"./el-form-item.9907c0bd.js";import{E as U,a as k}from"./el-input.c8a516db.js";import{_ as w}from"./_plugin-vue_export-helper.cdc0426e.js";import"./index.db1b447a.js";const S={class:"form"},X={__name:"form",setup(v){const p=I(),m=D(),_=b(),E=(r,e,t)=>{if(e==="")t(new Error("\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01\uFF01\uFF01"));else{if(e.length>10||e.length<5){t(new Error("\u7528\u6237\u540D\u957F\u5EA65-10\u4F4D\uFF01\uFF01\uFF01"));return}t()}},y=(r,e,t)=>{if(e==="")t(new Error("\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A\uFF01\uFF01\uFF01"));else{if(e.length>10||e.length<5){t(new Error("\u5BC6\u7801\u957F\u5EA65-10\u4F4D\uFF01\uFF01\uFF01"));return}t()}},o=c({username:"",password:""}),x=c({username:[{validator:E,trigger:"change"}],password:[{validator:y,trigger:"change"}]}),h=r=>{if(!r)return;if(!/^[\da-z]+$/i.test(o.username)){d.error("\u7528\u6237\u540D\u7531\u5B57\u6BCD\u6216\u6570\u5B57\u7EC4\u6210~");return}r.validate(t=>{if(t)R.post({url:"/user/login",data:{username:o.username,password:o.password}}).then(n=>{let a=n.data;a.status?($.setCache("userInfo",JSON.stringify(a)),p.userInfo=a,d({message:"\u767B\u5F55\u6210\u529F\uFF01\uFF01\uFF01",type:"success"}),m.replace("/main")):d.error(a.message)}).catch(n=>{console.log(n)});else return console.log("error submit!"),!1})},V=r=>{!r||r.resetFields()},C=()=>{m.replace("/register")};return(r,e)=>{const t=U,n=B,a=k,F=N;return f(),g("div",S,[s(F,{ref_key:"formDataRef",ref:_,model:o,"status-icon":"",rules:x,"label-width":"85px",class:"demo-formData"},{default:l(()=>[s(n,{label:"\u8D26\xA0\xA0\xA0\xA0\xA0\xA0\xA0\u53F7\uFF1A",prop:"username"},{default:l(()=>[s(t,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=u=>o.username=u)},null,8,["modelValue"])]),_:1}),s(n,{label:"\u5BC6\xA0\xA0\xA0\xA0\xA0\xA0\xA0\u7801\uFF1A",prop:"password"},{default:l(()=>[s(t,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=u=>o.password=u),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(n,null,{default:l(()=>[s(a,{type:"primary",onClick:e[2]||(e[2]=u=>h(_.value))},{default:l(()=>[i("\u767B\u5F55")]),_:1}),s(a,{onClick:e[3]||(e[3]=u=>V(_.value))},{default:l(()=>[i("\u91CD\u7F6E")]),_:1}),s(a,{onClick:C},{default:l(()=>[i("\u6CE8\u518C\u9875\u9762")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}},j=w(X,[["__scopeId","data-v-6304e048"]]);const q={class:"login"},z={__name:"login",setup(v){return(p,m)=>(f(),g("div",q,[s(j)]))}},T=w(z,[["__scopeId","data-v-9a4a555b"]]);export{T as default};
