import{a as B,y as I,o as i,c as E,F as f,U as S,w as r,N as L,aQ as R,bs as $,d as g,Z as U,X as _,E as b,r as d,b as q}from"./index.ba9acda8.js";import{E as z}from"./el-loading.47d0f2a9.js";import{h as A,i as F,I as P,T as X}from"./Input.61d7e6a0.js";import"./el-popper.29d916c5.js";import{a as M}from"./el-input.7395ed05.js";import{_ as w}from"./_plugin-vue_export-helper.cdc0426e.js";import"./index.9cbf0032.js";const Q={class:"commonTable"},V={__name:"CommonTable",props:{tableDataCommon:Array},emits:["requestCommon"],setup(T,{emit:y}){const N=T;let m=B([]);I(()=>N.tableDataCommon,(u,c)=>{m=u});const v=async(u,c)=>{let l=Number(u[c])?0:1;const o=await _.get({url:"/common/updateStatus",params:{fieldName:c,status:l}});o.data.status?(b({message:o.data.message,type:"success"}),y("requestCommon")):b.error(o.data.message)};return(u,c)=>{const l=M,o=A,h=F;return i(),E("div",Q,[f(m).length>0?(i(),S(h,{key:0,data:f(m),border:"",stripe:"",style:{width:"100%"}},{default:r(()=>[(i(!0),E(L,null,R(f(m)[0],(C,a)=>(i(),S(o,{key:a,prop:a,label:a},$({default:r(({row:e})=>[Number(e[a])?(i(),S(l,{key:1,size:"small",type:"danger",plain:"",onClick:t=>v(e,a)},{default:r(()=>[g("\u7981\u6B62\u767B\u5F55")]),_:2},1032,["onClick"])):(i(),S(l,{key:0,size:"small",type:"primary",plain:"",onClick:t=>v(e,a)},{default:r(()=>[g("\u5141\u8BB8\u767B\u5F55")]),_:2},1032,["onClick"]))]),_:2},[a==="loginStatus_all_admin"?{name:"header",fn:r(()=>[g(" \u7BA1\u7406\u5458\u767B\u5F55\u72B6\u6001 ")]),key:"0"}:void 0,a==="registerStatus_all_admin"?{name:"header",fn:r(()=>[g(" \u7BA1\u7406\u5458\u6CE8\u518C\u72B6\u6001 ")]),key:"1"}:void 0,a==="loginStatus_all_user"?{name:"header",fn:r(()=>[g(" \u666E\u901A\u7528\u6237\u767B\u5F55\u72B6\u6001 ")]),key:"2"}:void 0,a==="registerStatus_all_user"?{name:"header",fn:r(()=>[g(" \u666E\u901A\u7528\u6237\u6CE8\u518C\u72B6\u6001 ")]),key:"3"}:void 0]),1032,["prop","label"]))),128))]),_:1},8,["data"])):U("",!0)])}}},W=w(V,[["__scopeId","data-v-399a0281"]]);const Z={class:"user"},j={__name:"user",setup(T){const y=z.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}),N=d("\u8BF7\u8F93\u5165\u7528\u6237\u540D~"),m=d(null),v=e=>{m.value.currentPage=1,a(1,e)};let u=d([]);const c=async()=>{const e=_.get({url:"/common/getStatus",params:{fieldName:"loginStatus_all_admin"}}),t=_.get({url:"/common/getStatus",params:{fieldName:"registerStatus_all_admin"}}),n=_.get({url:"/common/getStatus",params:{fieldName:"loginStatus_all_user"}}),s=_.get({url:"/common/getStatus",params:{fieldName:"registerStatus_all_user"}});Promise.all([e,t,n,s]).then(p=>{if(!p[0].data.status){b.error(p[0].data.message);return}let x={};for(const D of p)for(const k in D.data.message)x[k]=D.data.message[k];u.value=[x]}).catch(p=>{console.log(p)})};c();let l=d();const o=async()=>{const e=await _.get({url:"/common/getSum",params:{tableName:"user"}});if(!e.data.status){b.error(e.data.message);return}l.value=e.data.message.sum-1};o();let h=d([]);const C=async(e=10,t=0,n)=>{n!==void 0?l.value=10:o();const s=await _.get({url:"/user/getUsers",params:{inputVal:n,limit:e,offset:t}});if(!s.data.status){b.error(s.data.message);return}h.value=s.data.message,setTimeout(()=>{y.close()},500)};C();const a=(e,t)=>{t=t===""?void 0:t;let n=d(10),s=d(0);e!==1&&(s.value=s.value+n.value*(e-1)),o(),t===void 0?C(n.value,s.value):C(n.value,s.value,t)};return(e,t)=>(i(),E("div",Z,[q(W,{tableDataCommon:f(u),onRequestCommon:c},null,8,["tableDataCommon"]),q(P,{onSearch:v,placeholderVal:N.value},null,8,["placeholderVal"]),q(X,{ref_key:"tableEl",ref:m,tableData:f(h),onAgainRequest:a,sum:f(l)},null,8,["tableData","sum"])]))}},ae=w(j,[["__scopeId","data-v-ab5b9793"]]);export{ae as default};
