import{e as T,t as J,f as $,r as V,U as W,a as i,k as M,h as Q,F as k,g as I,H as ee,m as j,i as te,O as D,ag as ne,ah as re,B as z,ai as ae,n as se,aj as ie,E as oe,ak as le,K as ue,N as ce,L as he,al as de,p as fe,_ as pe,l as ge,M as ye,s as R,X as N,am as me,ae as xe,o as ve,c as be,b as G,w as _e,d as Fe,V as Se,an as Be,ao as Ee}from"./index-ccedb79d.js";import{u as Ae}from"./use-placeholder-46a67666.js";import{r as we,u as De}from"./use-route-e010548b.js";import{B as X,u as Pe,L as Ce,F as Te}from"./index-b02c297f.js";const[Y,q]=T("action-bar"),Z=Symbol(Y),$e={placeholder:Boolean,safeAreaInsetBottom:J};var Me=$({name:Y,props:$e,setup(o,{slots:x}){const g=V(),y=Ae(g,q),{linkChildren:v}=W(Z);v();const d=()=>{var f;return i("div",{ref:g,class:[q(),{"van-safe-area-bottom":o.safeAreaInsetBottom}]},[(f=x.default)==null?void 0:f.call(x)])};return()=>o.placeholder?y(d):d()}});const it=M(Me),[Ue,Ve]=T("action-bar-button"),Ie=Q({},we,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var ze=$({name:Ue,props:Ie,setup(o,{slots:x}){const g=De(),{parent:y,index:v}=k(Z),d=I(()=>{if(y){const l=y.children[v.value-1];return!(l&&"isButton"in l)}}),f=I(()=>{if(y){const l=y.children[v.value+1];return!(l&&"isButton"in l)}});return ee({isButton:!0}),()=>{const{type:l,icon:m,text:b,color:u,loading:h,disabled:p}=o;return i(X,{class:Ve([l,{last:f.value,first:d.value}]),size:"large",type:l,icon:m,color:u,loading:h,disabled:p,onClick:g},{default:()=>[x.default?x.default():b]})}}});const ot=M(ze),[He,U]=T("empty"),Ge={image:j("default"),imageSize:[Number,String,Array],description:String};var Le=$({name:He,props:Ge,setup(o,{slots:x}){const g=()=>{const s=x.description?x.description():o.description;if(s)return i("p",{class:U("description")},[s])},y=()=>{if(x.default)return i("div",{class:U("bottom")},[x.default()])},v=Pe(),d=s=>`${v}-${s}`,f=s=>`url(#${d(s)})`,l=(s,a,t)=>i("stop",{"stop-color":s,offset:`${a}%`,"stop-opacity":t},null),m=(s,a)=>[l(s,0),l(a,100)],b=s=>[i("defs",null,[i("radialGradient",{id:d(s),cx:"50%",cy:"54%",fx:"50%",fy:"54%",r:"297%",gradientTransform:"matrix(-.16 0 0 -.33 .58 .72)"},[l("#EBEDF0",0),l("#F2F3F5",100,.3)])]),i("ellipse",{fill:f(s),opacity:".8",cx:"80",cy:"140",rx:"46",ry:"8"},null)],u=()=>[i("defs",null,[i("linearGradient",{id:d("a"),x1:"64%",y1:"100%",x2:"64%"},[l("#FFF",0,.5),l("#F2F3F5",100)])]),i("g",{opacity:".8"},[i("path",{d:"M36 131V53H16v20H2v58h34z",fill:f("a")},null),i("path",{d:"M123 15h22v14h9v77h-31V15z",fill:f("a")},null)])],h=()=>[i("defs",null,[i("linearGradient",{id:d("b"),x1:"64%",y1:"97%",x2:"64%",y2:"0%"},[l("#F2F3F5",0,.3),l("#F2F3F5",100)])]),i("g",{opacity:".8"},[i("path",{d:"M87 6c3 0 7 3 8 6a8 8 0 1 1-1 16H80a7 7 0 0 1-8-6c0-4 3-7 6-7 0-5 4-9 9-9Z",fill:f("b")},null),i("path",{d:"M19 23c2 0 3 1 4 3 2 0 4 2 4 4a4 4 0 0 1-4 3v1h-7v-1l-1 1c-2 0-3-2-3-4 0-1 1-3 3-3 0-2 2-4 4-4Z",fill:f("b")},null)])],p=()=>i("svg",{viewBox:"0 0 160 160"},[i("defs",null,[i("linearGradient",{id:d(1),x1:"64%",y1:"100%",x2:"64%"},[l("#FFF",0,.5),l("#F2F3F5",100)]),i("linearGradient",{id:d(2),x1:"50%",x2:"50%",y2:"84%"},[l("#EBEDF0",0),l("#DCDEE0",100,0)]),i("linearGradient",{id:d(3),x1:"100%",x2:"100%",y2:"100%"},[m("#EAEDF0","#DCDEE0")]),i("radialGradient",{id:d(4),cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54 0 .5 -.5)"},[l("#EBEDF0",0),l("#FFF",100,0)])]),i("g",{fill:"none"},[u(),i("path",{fill:f(4),d:"M0 139h160v21H0z"},null),i("path",{d:"M80 54a7 7 0 0 1 3 13v27l-2 2h-2a2 2 0 0 1-2-2V67a7 7 0 0 1 3-13z",fill:f(2)},null),i("g",{opacity:".6","stroke-linecap":"round","stroke-width":"7"},[i("path",{d:"M64 47a19 19 0 0 0-5 13c0 5 2 10 5 13",stroke:f(3)},null),i("path",{d:"M53 36a34 34 0 0 0 0 48",stroke:f(3)},null),i("path",{d:"M95 73a19 19 0 0 0 6-13c0-5-2-9-6-13",stroke:f(3)},null),i("path",{d:"M106 84a34 34 0 0 0 0-48",stroke:f(3)},null)]),i("g",{transform:"translate(31 105)"},[i("rect",{fill:"#EBEDF0",width:"98",height:"34",rx:"2"},null),i("rect",{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.1"},null),i("rect",{fill:"#EBEDF0",x:"15",y:"12",width:"18",height:"6",rx:"1.1"},null)])])]),_=()=>i("svg",{viewBox:"0 0 160 160"},[i("defs",null,[i("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:d(5)},[m("#F2F3F5","#DCDEE0")]),i("linearGradient",{x1:"95%",y1:"48%",x2:"5.5%",y2:"51%",id:d(6)},[m("#EAEDF1","#DCDEE0")]),i("linearGradient",{y1:"45%",x2:"100%",y2:"54%",id:d(7)},[m("#EAEDF1","#DCDEE0")])]),u(),h(),i("g",{transform:"translate(36 50)",fill:"none"},[i("g",{transform:"translate(8)"},[i("rect",{fill:"#EBEDF0",opacity:".6",x:"38",y:"13",width:"36",height:"53",rx:"2"},null),i("rect",{fill:f(5),width:"64",height:"66",rx:"2"},null),i("rect",{fill:"#FFF",x:"6",y:"6",width:"52",height:"55",rx:"1"},null),i("g",{transform:"translate(15 17)",fill:f(6)},[i("rect",{width:"34",height:"6",rx:"1"},null),i("path",{d:"M0 14h34v6H0z"},null),i("rect",{y:"28",width:"34",height:"6",rx:"1"},null)])]),i("rect",{fill:f(7),y:"61",width:"88",height:"28",rx:"1"},null),i("rect",{fill:"#F7F8FA",x:"29",y:"72",width:"30",height:"6",rx:"1"},null)])]),A=()=>i("svg",{viewBox:"0 0 160 160"},[i("defs",null,[i("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:d(8)},[m("#EAEDF1","#DCDEE0")])]),u(),h(),b("c"),i("path",{d:"m59 60 21 21 21-21h3l9 9v3L92 93l21 21v3l-9 9h-3l-21-21-21 21h-3l-9-9v-3l21-21-21-21v-3l9-9h3Z",fill:f(8)},null)]),S=()=>i("svg",{viewBox:"0 0 160 160"},[i("defs",null,[i("linearGradient",{x1:"50%",y1:"100%",x2:"50%",id:d(9)},[m("#EEE","#D8D8D8")]),i("linearGradient",{x1:"100%",y1:"50%",y2:"50%",id:d(10)},[m("#F2F3F5","#DCDEE0")]),i("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:d(11)},[m("#F2F3F5","#DCDEE0")]),i("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:d(12)},[m("#FFF","#F7F8FA")])]),u(),h(),b("d"),i("g",{transform:"rotate(-45 113 -4)",fill:"none"},[i("rect",{fill:f(9),x:"24",y:"52.8",width:"5.8",height:"19",rx:"1"},null),i("rect",{fill:f(10),x:"22.1",y:"67.3",width:"9.9",height:"28",rx:"1"},null),i("circle",{stroke:f(11),"stroke-width":"8",cx:"27",cy:"27",r:"27"},null),i("circle",{fill:f(12),cx:"27",cy:"27",r:"16"},null),i("path",{d:"M37 7c-8 0-15 5-16 12",stroke:f(11),"stroke-width":"3",opacity:".5","stroke-linecap":"round",transform:"rotate(45 29 13)"},null)])]),c=()=>{var s;if(x.image)return x.image();const a={error:A,search:S,network:p,default:_};return((s=a[o.image])==null?void 0:s.call(a))||i("img",{src:o.image},null)};return()=>i("div",{class:U()},[i("div",{class:U("image"),style:te(o.imageSize)},[c()]),g(),y()])}});const lt=M(Le),[Re,P,O]=T("pagination"),H=(o,x,g)=>({number:o,text:x,active:g}),Ne={mode:j("multi"),prevText:String,nextText:String,pageCount:D(0),modelValue:ne(0),totalItems:D(0),showPageSize:D(5),itemsPerPage:D(10),forceEllipses:Boolean};var qe=$({name:Re,props:Ne,emits:["change","update:modelValue"],setup(o,{emit:x,slots:g}){const y=I(()=>{const{pageCount:u,totalItems:h,itemsPerPage:p}=o,_=+u||Math.ceil(+h/+p);return Math.max(1,_)}),v=I(()=>{const u=[],h=y.value,p=+o.showPageSize,{modelValue:_,forceEllipses:A}=o;let S=1,c=h;const s=p<h;s&&(S=Math.max(_-Math.floor(p/2),1),c=S+p-1,c>h&&(c=h,S=c-p+1));for(let a=S;a<=c;a++){const t=H(a,a,a===_);u.push(t)}if(s&&p>0&&A){if(S>1){const a=H(S-1,"...");u.unshift(a)}if(c<h){const a=H(c+1,"...");u.push(a)}}return u}),d=(u,h)=>{u=ae(u,1,y.value),o.modelValue!==u&&(x("update:modelValue",u),h&&x("change",u))};re(()=>d(o.modelValue));const f=()=>i("li",{class:P("page-desc")},[g.pageDesc?g.pageDesc():`${o.modelValue}/${y.value}`]),l=()=>{const{mode:u,modelValue:h}=o,p=g["prev-text"],_=h===1;return i("li",{class:[P("item",{disabled:_,border:u==="simple",prev:!0}),z]},[i("button",{type:"button",disabled:_,onClick:()=>d(h-1,!0)},[p?p():o.prevText||O("prev")])])},m=()=>{const{mode:u,modelValue:h}=o,p=g["next-text"],_=h===y.value;return i("li",{class:[P("item",{disabled:_,border:u==="simple",next:!0}),z]},[i("button",{type:"button",disabled:_,onClick:()=>d(h+1,!0)},[p?p():o.nextText||O("next")])])},b=()=>v.value.map(u=>i("li",{class:[P("item",{active:u.active,page:!0}),z]},[i("button",{type:"button","aria-current":u.active||void 0,onClick:()=>d(u.number,!0)},[g.page?g.page(u):u.text])]));return()=>i("nav",{role:"navigation",class:P()},[i("ul",{class:P("items")},[l(),o.mode==="simple"?f():b(),m()])])}});const ut=M(qe),[Oe,C,je]=T("pull-refresh"),K=50,Xe=["pulling","loosing","success"],Ye={disabled:Boolean,modelValue:Boolean,headHeight:D(K),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:se,successDuration:D(500),animationDuration:D(300)};var Ze=$({name:Oe,props:Ye,emits:["change","refresh","update:modelValue"],setup(o,{emit:x,slots:g}){let y;const v=V(),d=V(),f=ie(v),l=oe({status:"normal",distance:0,duration:0}),m=le(),b=()=>{if(o.headHeight!==K)return{height:`${o.headHeight}px`}},u=()=>l.status!=="loading"&&l.status!=="success"&&!o.disabled,h=e=>{const r=+(o.pullDistance||o.headHeight);return e>r&&(e<r*2?e=r+(e-r)/2:e=r*1.5+(e-r*2)/4),Math.round(e)},p=(e,r)=>{const n=+(o.pullDistance||o.headHeight);l.distance=e,r?l.status="loading":e===0?l.status="normal":e<n?l.status="pulling":l.status="loosing",x("change",{status:l.status,distance:e})},_=()=>{const{status:e}=l;return e==="normal"?"":o[`${e}Text`]||je(e)},A=()=>{const{status:e,distance:r}=l;if(g[e])return g[e]({distance:r});const n=[];return Xe.includes(e)&&n.push(i("div",{class:C("text")},[_()])),e==="loading"&&n.push(i(Ce,{class:C("loading")},{default:_})),n},S=()=>{l.status="success",setTimeout(()=>{p(0)},+o.successDuration)},c=e=>{y=de(f.value)===0,y&&(l.duration=0,m.start(e))},s=e=>{u()&&c(e)},a=e=>{if(u()){y||c(e);const{deltaY:r}=m;m.move(e),y&&r.value>=0&&m.isVertical()&&(fe(e),p(h(r.value)))}},t=()=>{y&&m.deltaY.value&&u()&&(l.duration=+o.animationDuration,l.status==="loosing"?(p(+o.headHeight,!0),x("update:modelValue",!0),he(()=>x("refresh"))):p(0))};return ue(()=>o.modelValue,e=>{l.duration=+o.animationDuration,e?p(+o.headHeight,!0):g.success||o.successText?S():p(0,!1)}),ce("touchmove",a,{target:d}),()=>{var e;const r={transitionDuration:`${l.duration}ms`,transform:l.distance?`translate3d(0,${l.distance}px, 0)`:""};return i("div",{ref:v,class:C()},[i("div",{ref:d,class:C("track"),style:r,onTouchstartPassive:s,onTouchend:t,onTouchcancel:t},[i("div",{class:C("head"),style:b()},[A()]),(e=g.default)==null?void 0:e.call(g)])])}}});const ct=M(Ze);var L={},Ke={get exports(){return L},set exports(o){L=o}};(function(o,x){(function(g){o.exports=g()})(function(g){var y=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function v(s,a){var t=s[0],e=s[1],r=s[2],n=s[3];t+=(e&r|~e&n)+a[0]-680876936|0,t=(t<<7|t>>>25)+e|0,n+=(t&e|~t&r)+a[1]-389564586|0,n=(n<<12|n>>>20)+t|0,r+=(n&t|~n&e)+a[2]+606105819|0,r=(r<<17|r>>>15)+n|0,e+=(r&n|~r&t)+a[3]-1044525330|0,e=(e<<22|e>>>10)+r|0,t+=(e&r|~e&n)+a[4]-176418897|0,t=(t<<7|t>>>25)+e|0,n+=(t&e|~t&r)+a[5]+1200080426|0,n=(n<<12|n>>>20)+t|0,r+=(n&t|~n&e)+a[6]-1473231341|0,r=(r<<17|r>>>15)+n|0,e+=(r&n|~r&t)+a[7]-45705983|0,e=(e<<22|e>>>10)+r|0,t+=(e&r|~e&n)+a[8]+1770035416|0,t=(t<<7|t>>>25)+e|0,n+=(t&e|~t&r)+a[9]-1958414417|0,n=(n<<12|n>>>20)+t|0,r+=(n&t|~n&e)+a[10]-42063|0,r=(r<<17|r>>>15)+n|0,e+=(r&n|~r&t)+a[11]-1990404162|0,e=(e<<22|e>>>10)+r|0,t+=(e&r|~e&n)+a[12]+1804603682|0,t=(t<<7|t>>>25)+e|0,n+=(t&e|~t&r)+a[13]-40341101|0,n=(n<<12|n>>>20)+t|0,r+=(n&t|~n&e)+a[14]-1502002290|0,r=(r<<17|r>>>15)+n|0,e+=(r&n|~r&t)+a[15]+1236535329|0,e=(e<<22|e>>>10)+r|0,t+=(e&n|r&~n)+a[1]-165796510|0,t=(t<<5|t>>>27)+e|0,n+=(t&r|e&~r)+a[6]-1069501632|0,n=(n<<9|n>>>23)+t|0,r+=(n&e|t&~e)+a[11]+643717713|0,r=(r<<14|r>>>18)+n|0,e+=(r&t|n&~t)+a[0]-373897302|0,e=(e<<20|e>>>12)+r|0,t+=(e&n|r&~n)+a[5]-701558691|0,t=(t<<5|t>>>27)+e|0,n+=(t&r|e&~r)+a[10]+38016083|0,n=(n<<9|n>>>23)+t|0,r+=(n&e|t&~e)+a[15]-660478335|0,r=(r<<14|r>>>18)+n|0,e+=(r&t|n&~t)+a[4]-405537848|0,e=(e<<20|e>>>12)+r|0,t+=(e&n|r&~n)+a[9]+568446438|0,t=(t<<5|t>>>27)+e|0,n+=(t&r|e&~r)+a[14]-1019803690|0,n=(n<<9|n>>>23)+t|0,r+=(n&e|t&~e)+a[3]-187363961|0,r=(r<<14|r>>>18)+n|0,e+=(r&t|n&~t)+a[8]+1163531501|0,e=(e<<20|e>>>12)+r|0,t+=(e&n|r&~n)+a[13]-1444681467|0,t=(t<<5|t>>>27)+e|0,n+=(t&r|e&~r)+a[2]-51403784|0,n=(n<<9|n>>>23)+t|0,r+=(n&e|t&~e)+a[7]+1735328473|0,r=(r<<14|r>>>18)+n|0,e+=(r&t|n&~t)+a[12]-1926607734|0,e=(e<<20|e>>>12)+r|0,t+=(e^r^n)+a[5]-378558|0,t=(t<<4|t>>>28)+e|0,n+=(t^e^r)+a[8]-2022574463|0,n=(n<<11|n>>>21)+t|0,r+=(n^t^e)+a[11]+1839030562|0,r=(r<<16|r>>>16)+n|0,e+=(r^n^t)+a[14]-35309556|0,e=(e<<23|e>>>9)+r|0,t+=(e^r^n)+a[1]-1530992060|0,t=(t<<4|t>>>28)+e|0,n+=(t^e^r)+a[4]+1272893353|0,n=(n<<11|n>>>21)+t|0,r+=(n^t^e)+a[7]-155497632|0,r=(r<<16|r>>>16)+n|0,e+=(r^n^t)+a[10]-1094730640|0,e=(e<<23|e>>>9)+r|0,t+=(e^r^n)+a[13]+681279174|0,t=(t<<4|t>>>28)+e|0,n+=(t^e^r)+a[0]-358537222|0,n=(n<<11|n>>>21)+t|0,r+=(n^t^e)+a[3]-722521979|0,r=(r<<16|r>>>16)+n|0,e+=(r^n^t)+a[6]+76029189|0,e=(e<<23|e>>>9)+r|0,t+=(e^r^n)+a[9]-640364487|0,t=(t<<4|t>>>28)+e|0,n+=(t^e^r)+a[12]-421815835|0,n=(n<<11|n>>>21)+t|0,r+=(n^t^e)+a[15]+530742520|0,r=(r<<16|r>>>16)+n|0,e+=(r^n^t)+a[2]-995338651|0,e=(e<<23|e>>>9)+r|0,t+=(r^(e|~n))+a[0]-198630844|0,t=(t<<6|t>>>26)+e|0,n+=(e^(t|~r))+a[7]+1126891415|0,n=(n<<10|n>>>22)+t|0,r+=(t^(n|~e))+a[14]-1416354905|0,r=(r<<15|r>>>17)+n|0,e+=(n^(r|~t))+a[5]-57434055|0,e=(e<<21|e>>>11)+r|0,t+=(r^(e|~n))+a[12]+1700485571|0,t=(t<<6|t>>>26)+e|0,n+=(e^(t|~r))+a[3]-1894986606|0,n=(n<<10|n>>>22)+t|0,r+=(t^(n|~e))+a[10]-1051523|0,r=(r<<15|r>>>17)+n|0,e+=(n^(r|~t))+a[1]-2054922799|0,e=(e<<21|e>>>11)+r|0,t+=(r^(e|~n))+a[8]+1873313359|0,t=(t<<6|t>>>26)+e|0,n+=(e^(t|~r))+a[15]-30611744|0,n=(n<<10|n>>>22)+t|0,r+=(t^(n|~e))+a[6]-1560198380|0,r=(r<<15|r>>>17)+n|0,e+=(n^(r|~t))+a[13]+1309151649|0,e=(e<<21|e>>>11)+r|0,t+=(r^(e|~n))+a[4]-145523070|0,t=(t<<6|t>>>26)+e|0,n+=(e^(t|~r))+a[11]-1120210379|0,n=(n<<10|n>>>22)+t|0,r+=(t^(n|~e))+a[2]+718787259|0,r=(r<<15|r>>>17)+n|0,e+=(n^(r|~t))+a[9]-343485551|0,e=(e<<21|e>>>11)+r|0,s[0]=t+s[0]|0,s[1]=e+s[1]|0,s[2]=r+s[2]|0,s[3]=n+s[3]|0}function d(s){var a=[],t;for(t=0;t<64;t+=4)a[t>>2]=s.charCodeAt(t)+(s.charCodeAt(t+1)<<8)+(s.charCodeAt(t+2)<<16)+(s.charCodeAt(t+3)<<24);return a}function f(s){var a=[],t;for(t=0;t<64;t+=4)a[t>>2]=s[t]+(s[t+1]<<8)+(s[t+2]<<16)+(s[t+3]<<24);return a}function l(s){var a=s.length,t=[1732584193,-271733879,-1732584194,271733878],e,r,n,B,F,E;for(e=64;e<=a;e+=64)v(t,d(s.substring(e-64,e)));for(s=s.substring(e-64),r=s.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<r;e+=1)n[e>>2]|=s.charCodeAt(e)<<(e%4<<3);if(n[e>>2]|=128<<(e%4<<3),e>55)for(v(t,n),e=0;e<16;e+=1)n[e]=0;return B=a*8,B=B.toString(16).match(/(.*?)(.{0,8})$/),F=parseInt(B[2],16),E=parseInt(B[1],16)||0,n[14]=F,n[15]=E,v(t,n),t}function m(s){var a=s.length,t=[1732584193,-271733879,-1732584194,271733878],e,r,n,B,F,E;for(e=64;e<=a;e+=64)v(t,f(s.subarray(e-64,e)));for(s=e-64<a?s.subarray(e-64):new Uint8Array(0),r=s.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<r;e+=1)n[e>>2]|=s[e]<<(e%4<<3);if(n[e>>2]|=128<<(e%4<<3),e>55)for(v(t,n),e=0;e<16;e+=1)n[e]=0;return B=a*8,B=B.toString(16).match(/(.*?)(.{0,8})$/),F=parseInt(B[2],16),E=parseInt(B[1],16)||0,n[14]=F,n[15]=E,v(t,n),t}function b(s){var a="",t;for(t=0;t<4;t+=1)a+=y[s>>t*8+4&15]+y[s>>t*8&15];return a}function u(s){var a;for(a=0;a<s.length;a+=1)s[a]=b(s[a]);return s.join("")}u(l("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function s(a,t){return a=a|0||0,a<0?Math.max(a+t,0):Math.min(a,t)}ArrayBuffer.prototype.slice=function(a,t){var e=this.byteLength,r=s(a,e),n=e,B,F,E,w;return t!==g&&(n=s(t,e)),r>n?new ArrayBuffer(0):(B=n-r,F=new ArrayBuffer(B),E=new Uint8Array(F),w=new Uint8Array(this,r,B),E.set(w),F)}}();function h(s){return/[\u0080-\uFFFF]/.test(s)&&(s=unescape(encodeURIComponent(s))),s}function p(s,a){var t=s.length,e=new ArrayBuffer(t),r=new Uint8Array(e),n;for(n=0;n<t;n+=1)r[n]=s.charCodeAt(n);return a?r:e}function _(s){return String.fromCharCode.apply(null,new Uint8Array(s))}function A(s,a,t){var e=new Uint8Array(s.byteLength+a.byteLength);return e.set(new Uint8Array(s)),e.set(new Uint8Array(a),s.byteLength),t?e:e.buffer}function S(s){var a=[],t=s.length,e;for(e=0;e<t-1;e+=2)a.push(parseInt(s.substr(e,2),16));return String.fromCharCode.apply(String,a)}function c(){this.reset()}return c.prototype.append=function(s){return this.appendBinary(h(s)),this},c.prototype.appendBinary=function(s){this._buff+=s,this._length+=s.length;var a=this._buff.length,t;for(t=64;t<=a;t+=64)v(this._hash,d(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},c.prototype.end=function(s){var a=this._buff,t=a.length,e,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n;for(e=0;e<t;e+=1)r[e>>2]|=a.charCodeAt(e)<<(e%4<<3);return this._finish(r,t),n=u(this._hash),s&&(n=S(n)),this.reset(),n},c.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},c.prototype.setState=function(s){return this._buff=s.buff,this._length=s.length,this._hash=s.hash,this},c.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},c.prototype._finish=function(s,a){var t=a,e,r,n;if(s[t>>2]|=128<<(t%4<<3),t>55)for(v(this._hash,s),t=0;t<16;t+=1)s[t]=0;e=this._length*8,e=e.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(e[2],16),n=parseInt(e[1],16)||0,s[14]=r,s[15]=n,v(this._hash,s)},c.hash=function(s,a){return c.hashBinary(h(s),a)},c.hashBinary=function(s,a){var t=l(s),e=u(t);return a?S(e):e},c.ArrayBuffer=function(){this.reset()},c.ArrayBuffer.prototype.append=function(s){var a=A(this._buff.buffer,s,!0),t=a.length,e;for(this._length+=s.byteLength,e=64;e<=t;e+=64)v(this._hash,f(a.subarray(e-64,e)));return this._buff=e-64<t?new Uint8Array(a.buffer.slice(e-64)):new Uint8Array(0),this},c.ArrayBuffer.prototype.end=function(s){var a=this._buff,t=a.length,e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r,n;for(r=0;r<t;r+=1)e[r>>2]|=a[r]<<(r%4<<3);return this._finish(e,t),n=u(this._hash),s&&(n=S(n)),this.reset(),n},c.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.ArrayBuffer.prototype.getState=function(){var s=c.prototype.getState.call(this);return s.buff=_(s.buff),s},c.ArrayBuffer.prototype.setState=function(s){return s.buff=p(s.buff,!0),c.prototype.setState.call(this,s)},c.ArrayBuffer.prototype.destroy=c.prototype.destroy,c.ArrayBuffer.prototype._finish=c.prototype._finish,c.ArrayBuffer.hash=function(s,a){var t=m(new Uint8Array(s)),e=u(t);return a?S(e):e},c})})(Ke);const Je=L;const We=o=>(Be("data-v-de47432c"),o=o(),Ee(),o),Qe={class:"upload"},ke=["accept"],et=We(()=>G("progress",{value:"0",max:"100",style:{display:"none"}},null,-1)),tt={__name:"Upload",props:["accept"],emits:["againRequest"],setup(o,{emit:x}){const g=o;let y=ge.getCache("userInfo2");y=y===void 0?void 0:JSON.parse(y);let v=y.token;const d=V("");let f;const l=()=>{if(!d.value){R("文件名不能为空~");return}f()};return ye(()=>{const m=document.querySelector("#file"),b=document.querySelector("progress");f=()=>{m.click()},m.addEventListener("change",()=>{let h=Array.from(m.files);if(h.length>3){R("数量不能超过3个~"),h=[];return}let p=h[0].size,_=0;b.style.display="block",h.forEach(A=>{const S=A.type.split("/")[1],c=A.type;console.log("1、文件读取~");const s=new FileReader;s.readAsArrayBuffer(A),s.onload=async a=>{console.log("2、获取hash值~");const t=u(a.target.result);console.log("3、开始切片~");let e=5*1024*1024;A.size/e>100&&(e=Math.ceil(A.size/100));let r=[],n=0;for(let F=0;F<A.size;F+=e)r.push({hash:`${t}_${n}`,chunk:A.slice(F,F+e)}),n++;try{const{data:F}=await N.get({url:"/file/getFileSlice",params:{hash:t,suffix:S}});r=r.filter(E=>!F.includes(E.hash))}catch(F){console.log("获取已上传切片失败的原因："+F.response.data)}console.log("4、上传切片~");let B=[];h.length===1?b.max=r.length:b.max=h.length,r.forEach(F=>{let E=new FormData;E.append("file",F.chunk),E.append("hash",F.hash),E.append("suffix",S),B.push(me.post(`${xe}/file/uploadFileSlice?token=${v}`,E).then(w=>{h.length===1&&(_+=1,b.value=_)}).catch(w=>{console.log("切片上传失败的原因："+w.response.data)}))}),Promise.all(B).then(F=>{h.length>1&&(_+=1,b.value=_);let E=d.value;N.get({url:"/file/mergeFile",params:{hash:t,fileName:E,suffix:S,type:c,len:n,fileSize:p}}).then(w=>{d.value="",(b.value===b.max||r.length===0)&&(console.log("5、上传切片成功~"),b.value=0,b.max=100,b.style.display="none"),x("againRequest"),console.log(w.data.file)}).catch(w=>{console.log("合并切片失败的原因："+w.response.data)})}).catch(F=>{console.log("5、上传失败~")})}})});function u(h){const p=new Je.ArrayBuffer;return p.append(h),p.end()}}),(m,b)=>{const u=Te,h=X;return ve(),be(Se,null,[G("div",Qe,[i(u,{modelValue:d.value,"onUpdate:modelValue":b[0]||(b[0]=p=>d.value=p),placeholder:"请输入文件名~",style:{width:"70%",border:"2px #dcdedf solid"}},null,8,["modelValue"]),G("input",{type:"file",id:"file",style:{display:"none"},accept:g.accept,multiple:""},null,8,ke),i(h,{style:{"margin-left":"10px"},type:"primary",onClick:l},{default:_e(()=>[Fe("上传")]),_:1})]),et],64)}}},ht=pe(tt,[["__scopeId","data-v-de47432c"]]);export{ot as A,lt as E,ut as P,ht as U,ct as a,it as b};
