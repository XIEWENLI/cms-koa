import{r as b,a as _,o as f,c,b as s,w as n,d as p,u as C,E as i,X as D}from"./index.a89e79da.js";import{E as I,a as R}from"./el-form-item.da148964.js";import{E as U,a as B}from"./el-input.99f38d87.js";import{_ as g}from"./_plugin-vue_export-helper.cdc0426e.js";import"./index.308df97f.js";const L={class:"form"},N={__name:"Form",setup(w){const m=C(),d=b(),E=(t,e,r)=>{if(e==="")r(new Error("\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A\uFF01\uFF01\uFF01"));else{if(e.length>10||e.length<5){r(new Error("\u7528\u6237\u540D\u957F\u5EA65-10\u4F4D\uFF01\uFF01\uFF01"));return}r()}},v=(t,e,r)=>{if(e==="")r(new Error("\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A\uFF01\uFF01\uFF01"));else{if(e.length>10||e.length<5){r(new Error("\u5BC6\u7801\u957F\u5EA65-10\u4F4D\uFF01\uFF01\uFF01"));return}r()}},V=(t,e,r)=>{if(e==="")r(new Error("\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A\uFF01\uFF01\uFF01"));else{if(e.length>10||e.length<5){r(new Error("\u5BC6\u7801\u957F\u5EA65-10\u4F4D\uFF01\uFF01\uFF01"));return}if(e!==o.password){r(new Error("\u4E24\u6B21\u5BC6\u7801\u4E0D\u76F8\u540C\uFF01\uFF01\uFF01"));return}r()}},o=_({username:"",password:"",password2:""}),y=_({username:[{validator:E,trigger:"change"}],password:[{validator:v,trigger:"change"}],password2:[{validator:V,trigger:"change"}]}),x=t=>{if(!t)return;if(!/^[\da-z]+$/i.test(o.username)){i.error("\u7528\u6237\u540D\u7531\u5B57\u6BCD\u6216\u6570\u5B57\u7EC4\u6210~");return}t.validate(r=>{if(r)console.log("submit!"),D.post({url:"/user/register",data:{username:o.username,password:o.password}}).then(a=>{let u=a.data;u.status?(i({message:"\u6CE8\u518C\u6210\u529F\uFF01\uFF01\uFF01",type:"success"}),m.replace("/login")):i.error(u.message)}).catch(a=>{console.log(a)});else return console.log("error submit!"),!1})},F=t=>{!t||t.resetFields()},h=()=>{m.replace("/login")};return(t,e)=>{const r=U,a=I,u=B,$=R;return f(),c("div",L,[s($,{ref_key:"formDataRef",ref:d,model:o,"status-icon":"",rules:y,"label-width":"100px",class:"demo-formData"},{default:n(()=>[s(a,{label:"\u8D26\xA0\xA0\xA0\xA0\xA0\xA0\xA0\u53F7\uFF1A",prop:"username"},{default:n(()=>[s(r,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=l=>o.username=l)},null,8,["modelValue"])]),_:1}),s(a,{label:"\u5BC6\xA0\xA0\xA0\xA0\xA0\xA0\xA0\u7801\uFF1A",prop:"password"},{default:n(()=>[s(r,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=l=>o.password=l),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(a,{label:"\u91CD\u590D\u5BC6\u7801\uFF1A",prop:"password2"},{default:n(()=>[s(r,{modelValue:o.password2,"onUpdate:modelValue":e[2]||(e[2]=l=>o.password2=l),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(a,null,{default:n(()=>[s(u,{type:"primary",onClick:e[3]||(e[3]=l=>x(d.value))},{default:n(()=>[p("\u6CE8\u518C")]),_:1}),s(u,{onClick:e[4]||(e[4]=l=>F(d.value))},{default:n(()=>[p("\u91CD\u7F6E")]),_:1}),s(u,{onClick:h},{default:n(()=>[p("\u767B\u5F55\u754C\u9762")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}},P=g(N,[["__scopeId","data-v-14b58148"]]);const X={class:"register"},j={__name:"register",setup(w){return(m,d)=>(f(),c("div",X,[s(P)]))}},A=g(j,[["__scopeId","data-v-50932747"]]);export{A as default};
